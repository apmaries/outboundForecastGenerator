<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--Removes Google Crawler from indexing page-->
    <meta name="robots" content="noindex" />

    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
  </head>

  <body>
    <script>
      const clientId = "6f99c63b-3dfb-43cf-9792-a9b5c295d0ca";
      const redirectUri =
        "https://apmaries.github.io/outboundForecastGenerator/wfm-outbound.html";

      const appName = "outnoundForecastGenerator";
      const qParamLanguage = "language";
      const qParamEnvironment = "environment";

      // Default values are assigned but values should
      // be set on the function 'assignConfiguration'
      let language = "en-us";
      let environment = "mypurecloud.com";

      let userDetails = null;

      // Configure both the Platform SDK and the Client App SDK

      function setupGenesysClients() {
        const platformClient = require("platformClient");
        const client = platformClient.ApiClient.instance;
        const usersApi = new platformClient.UsersApi();

        // Configure Client App
        let ClientApp = window.purecloud.apps.ClientApp;
        let myClientApp = new ClientApp({
          pcEnvironment: environment,
        });

        // Configure and Authenticate Platform Client
        client.setPersistSettings(true, appName);
        client.setEnvironment(environment);

        return client
          .loginImplicitGrant(clientId, redirectUri)

          .then((data) => usersApi.getUsersMe())
          .then((data) => {
            userDetails = data;

            myClientApp.alerting.showToastPopup(
              `Hi ${userDetails.name}`,
              "Never gonna give you up, never gonna let you down ðŸ˜Š"
            );
          })
          .catch((err) => console.log(err));
      }
    </script>
  </body>
</html>
